<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ExcelBot</title>
    <link rel="stylesheet" href="./style.css" />
    <script src="./script.js" defer></script>
    <!-- Latest compiled and minified CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="heading">
        <h1>ExcelBot: Your Smart Data Partner</h1>
      </div>

      <div class="csv_upload">
        <input
          class="form-control"
          type="file"
          id="csvFileInput"
          accept=".csv"
          onchange="loadCSV()"
        />
        <button
          type="button"
          class="btnmy"
          data-bs-toggle="modal"
          data-bs-target="#myModal"
        >
          See file
        </button>
      </div>

      <div class="user_input">
        <div class="input_field">
          <textarea
            name="user_input"
            class="form__input"
            id="userInput"
            rows="6"
            placeholder="Enter your query..."
          ></textarea>
        </div>
        <div>
          <button class="btnmy" id="sendButton" onclick="sendMessage()">
            <!-- <span
              class="spinner-border spinner-border-sm"
              role="status"
              aria-hidden="true"
            ></span> -->
            Send your message
          </button>
        </div>
      </div>

      <div class="api_output">
        <div class="user_message" id="request" style="display: none"></div>
        <div class="api_answer" id="response" style="display: none"></div>
      </div>
    </div>

    <div class="modal" id="myModal">
      <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">CSV View</h4>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <!-- Modal body -->
          <div class="modal-body">
            <div id="csvContainer">
              <table id="csvTable" class="table table-striped"></table>
            </div>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
